package com.mobilematching.admin.util;

import java.nio.file.Path;
import java.nio.file.Paths;

import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

@Configuration
public class MvcConfig implements WebMvcConfigurer {

	@Override
	public void addResourceHandlers(ResourceHandlerRegistry registry) {
//		 String mobileDirName = "mobile-photos";
//		 Path mobilePhotosDirPath = Paths.get(mobileDirName).getParent();
//		 
//		 String mobilePhotosPath = mobilePhotosDirPath.toFile().getAbsolutePath();
//		
//		
//		 
//		 registry.addResourceHandler("/" + mobileDirName + "/**")
//		 	.addResourceLocations("file:/" + mobilePhotosPath + "/");
		 
		 
		 
		    String dirName = "mobile-photos";
		    Path mobilePhotosDir = Paths.get(dirName).toAbsolutePath();
		    Path parentDir = mobilePhotosDir.getParent(); // go one step up

		    String parentPath = parentDir.toFile().getAbsolutePath();

		    registry.addResourceHandler("/" + dirName + "/**")
		            .addResourceLocations("file:" + parentPath + "/");
		
	

		
		String brandLogosDirName = "brand-logos";
		Path brandLogosDir = Paths.get(brandLogosDirName);
		
		String brandLogosPath = brandLogosDir.toFile().getAbsolutePath();
		
		 registry.addResourceHandler("/" + brandLogosDirName + "/**")
			.addResourceLocations("file:/" + brandLogosPath + "/");	
		
		
		
		String pouchImageDirName = "pouch-photos";
		Path pouchImageDir = Paths.get(pouchImageDirName);
		
		String pouchImagePath = pouchImageDir.toFile().getAbsolutePath();
		
		 registry.addResourceHandler("/" + pouchImageDirName + "/**")
			.addResourceLocations("file:/" + pouchImagePath + "/");	
	}
}
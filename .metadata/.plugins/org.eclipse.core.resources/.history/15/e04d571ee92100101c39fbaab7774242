package com.mobilematching.admin.glassprotector;

import static org.assertj.core.api.Assertions.assertThat;

import java.util.Set;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;

import com.mobilematching.admin.mobiles.MobileRepository;
import com.mobilematching.entity.GlassProtector;
import com.mobilematching.entity.Mobile;
import com.mobilematching.entity.PrimaryModels;

public class GlassProtectorTests {

	 @Autowired
	    private GlassProtectorRepository glassProtectorRepo;

	    @Autowired
	    private MobileRepository mobileRepo;
	    
	    
	    @Test
	    public void testCreateGlassProtectorWithCompatibleModels() {
	        Mobile m1 = mobileRepo.findByName("Y20");
	        Mobile m2 = mobileRepo.findByName("Camon 20");

	        GlassProtector protector = new GlassProtector();
	        protector.setName("Vivo Y20 Tempered Glass");
	        protector.setPrimaryModel(PrimaryModels.Y20);
	        protector.setCompatibleModels(Set.of(m1, m2));

	        GlassProtector saved = glassProtectorRepo.save(protector);

	        assertThat(saved.getId()).isNotNull();
	        assertThat(saved.getCompatibleModels().size()).isEqualTo(2);
	    }


	
}
